{"level":"error","message":"Email delivery error: Email service error","service":"digest-delivery","stack":"Error: Email service error\n    at Object.<anonymous> (/Users/turphai/Projects/kiro_awareness/ai-information-aggregator/services/configuration-management/tests/digestDelivery.test.js:140:62)\n    at Promise.then.completed (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/testWorker.js:106:12)","timestamp":"2025-07-31T17:12:18.837Z"}
{"level":"error","message":"Email delivery failed for user 688ba3f20e30953d71d778f3: Email service error","service":"digest-delivery","stack":"Error: Email service error\n    at Object.<anonymous> (/Users/turphai/Projects/kiro_awareness/ai-information-aggregator/services/configuration-management/tests/digestDelivery.test.js:140:62)\n    at Promise.then.completed (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/testWorker.js:106:12)","timestamp":"2025-07-31T17:12:18.838Z"}
{"level":"error","message":"Email delivery error: SMTP error","service":"digest-delivery","stack":"Error: SMTP error\n    at Object.<anonymous> (/Users/turphai/Projects/kiro_awareness/ai-information-aggregator/services/configuration-management/tests/digestDelivery.test.js:177:62)\n    at Promise.then.completed (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/testWorker.js:106:12)","timestamp":"2025-07-31T17:12:19.150Z"}
{"level":"error","message":"In-app delivery error: Notification service error","service":"digest-delivery","stack":"Error: Notification service error\n    at Object.<anonymous> (/Users/turphai/Projects/kiro_awareness/ai-information-aggregator/services/configuration-management/tests/digestDelivery.test.js:201:74)\n    at Promise.then.completed (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/testWorker.js:106:12)","timestamp":"2025-07-31T17:12:19.205Z"}
{"level":"error","message":"Error delivering digest to user 688ba3f30e30953d71d7792f: Cannot read properties of null (reading 'metadata')","service":"digest-delivery","stack":"TypeError: Cannot read properties of null (reading 'metadata')\n    at DigestDelivery.metadata [as deliverDigest] (/Users/turphai/Projects/kiro_awareness/ai-information-aggregator/services/configuration-management/utils/digestDelivery.js:28:26)\n    at Object.deliverDigest (/Users/turphai/Projects/kiro_awareness/ai-information-aggregator/services/configuration-management/tests/digestDelivery.test.js:437:35)\n    at Promise.then.completed (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/turphai/Projects/kiro_awareness/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/runTest.js:444:34)\n    at Object.worker (/Users/turphai/Projects/kiro_awareness/node_modules/jest-runner/build/testWorker.js:106:12)","timestamp":"2025-07-31T17:12:19.394Z"}
